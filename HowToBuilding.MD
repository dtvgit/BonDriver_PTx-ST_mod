# How to build BonDriver_PTx-ST_mod series' solution packages.

## ■ソリューションファイルの種類とその関係

  ターゲットの種類と環境に応じて構築するソリューションを選択してください。
  （※すべてのソリューションを無理に構築する必要はないです。）

  各種ソリューションファイルは、ルートフォルダに位置しています。

  - BonDriver_PTx.sln
    - 構築環境： VisualStudio 2015 以降でサポートされるVC++構築環境
    - ターゲット： BonDriver_PTx.dll/PT3Ctrl.exe/PTCtrl.exe/PTxCtrl.exe/PTxScanS.exe
    - 概要： EARTH SOFT 純正ドライバのみ対応 [要:WindowsVistaSP2以降のOS]

  - BonDriver_PTx+PTw.sln
    - 構築環境： VisualStudio 2015 以降でサポートされるVC++構築環境
    - ターゲット： BonDriver_PTx.dll/PT3Ctrl.exe/PTCtrl.exe/PTwCtrl.exe/PTxCtrl.exe/PTxScanS.exe
    - 概要： EARTH SOFT 純正ドライバ ／ pt2wdm ドライバ両対応 [要:WindowsVistaSP2以降のOS]
    - 備考： pt2wdm ドライバのインストールと使い方については、[こちら](./PTwCtrl/)を参照してください


## ■ターゲットの構築

  各種ソリューションからターゲットとなる.EXE/.DLLを構築/生成する手順を説明します。

  構築する前に、Microsoft VisualStudio のインストールを済ませておいてください。
  VisualStudio は、以下のURLから手に入ります。インストールする際には、MSVC C++
  の機能を選択してからインストールすることを忘れないでください。

  URL: https://visualstudio.microsoft.com/ja/downloads/
        （コミュニティ版[無料]で構築出来ます）

  - ※ これはVisualStudio2019の場合ですが、インストールする項目を選択する際に、ワークロードの欄から "C++によるデスクトップ開発" 項目にチェックを入れてからインストールしてください。
    "MSVCv142 VS2019 C++ x64/x86 ビルドツール" が右欄インストールの詳細に選択されていればおｋです。

  ① 構築するソリューション.slnをダブルクリックして VisualStudio を立ち上げる
    （なにか聴かれたら、すべて「はい」または「OK」で答え、既定値のまま押通す）

  ② 上部ツールバーに Debug と表示されてたら、クリックして Release を選択する
    （Debugは、開発者用のソリューション構成なので、必ずReleaseを選択すること)

  ③ ターゲットの種類に応じ、②の右隣の x〇〇 と表示されている部分を切り替える

      Win32 → 32ビットで動作するDLLを生成する ( 通常はこちらを選択 )
      x64 → 64ビットで動作するDLLを生成する ( 64ビットアプリで使用する場合 )

  ④ 上部|ビルド|メニューから|ソリューションをビルド|を選択してビルドを完了する

  - ※生成物[ターゲット]は、ルートフォルダ直下のReleaseフォルダ配下にWin32とx64にそれぞれターゲットの種類に分別されて作成されます。

  - ※生成物で必要なものは、.EXEと.DLLだけです。同時に生成された.EXPや.LIBなどのファイル群は、動作に必要ではない為、消去してしまっても支障ありません。

  - ※Windows8.1SDKが必要など、ビルド時にエラーが表示される場合は、ソリューションの再ターゲットを行う必要があります。
    右側のソリューションエクスプローラの一覧から「ソリューション'XXXXXXX'」を選択し、右クリックのスピードメニューから"ソリューションの再ターゲット"を選択すると"ソリューション操作の再ターゲット"ダイアログが表示されます。
	指示に従ってプロジェクトをアップグレードしてから構築してみてください。(アップグレードの項目は既定値のままでおｋの筈です。)

  - ※構築したDLLを他のPCで動かす際には、ランタイムパッケージが必要になります。
   たとえば、VisualStudio2019で構築した場合は、VC++2019のランタイムパッケージを構築したDLLを動作させるターゲットPCに別途インストールする必要があります。
   VC++ランタイムパッケージについては、以下のURLからも取得可能なようです。

     URL: https://support.microsoft.com/ja-jp/help/2977003/the-latest-supported-visual-c-downloads


以上ノシ
